---
phase: 12-foundation-and-data-model
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - Assets/AyaLiveStream/ChatBotConfig.cs
  - Assets/AyaLiveStream/ChatMessage.cs
  - Assets/AyaLiveStream/Editor/MigrateChatBotConfigs.cs
autonomous: true

must_haves:
  truths:
    - "ChatBotConfig ScriptableObjects exist for all migrated characters with names, colors, personalities, and scripted message pools"
    - "ChatBotConfig assets are editable in the Unity Inspector with labeled fields"
    - "ChatMessage data model carries bot name, color, text, timestamp, user flag, and source config reference"
  artifacts:
    - path: "Assets/AyaLiveStream/ChatBotConfig.cs"
      provides: "ScriptableObject definition for chat bot configuration"
      exports: ["ChatBotConfig"]
      contains: "CreateAssetMenu"
      min_lines: 25
    - path: "Assets/AyaLiveStream/ChatMessage.cs"
      provides: "Data model for individual chat messages"
      exports: ["ChatMessage"]
      min_lines: 15
    - path: "Assets/AyaLiveStream/Editor/MigrateChatBotConfigs.cs"
      provides: "One-time editor menu script that creates ChatBotConfig .asset files"
      contains: "MenuItem"
      min_lines: 40
  key_links:
    - from: "Assets/AyaLiveStream/ChatMessage.cs"
      to: "Assets/AyaLiveStream/ChatBotConfig.cs"
      via: "Source field references ChatBotConfig"
      pattern: "ChatBotConfig Source"
    - from: "Assets/AyaLiveStream/Editor/MigrateChatBotConfigs.cs"
      to: "Assets/AyaLiveStream/ChatBotConfig.cs"
      via: "Creates ChatBotConfig assets with hardcoded character data"
      pattern: "CreateInstance.*ChatBotConfig"
---

<objective>
Create the ChatBotConfig ScriptableObject, ChatMessage data model, and a one-time editor migration script that populates ChatBotConfig assets with character data.

Purpose: Every downstream system needs these types. ChatBotConfig defines bot personas (Phase 13 uses them for scheduling). ChatMessage is the data currency flowing between the bot system and the UI (Phase 12 Plan 03 uses it for ListView binding). The migration script creates the actual .asset files.

Output: Two runtime C# files (ChatBotConfig.cs, ChatMessage.cs) and one editor script (MigrateChatBotConfigs.cs) plus the generated .asset files.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-foundation-and-data-model/12-RESEARCH.md

Key reference files:
@Packages/com.google.ai-embodiment/Runtime/PersonaConfig.cs (ScriptableObject pattern to follow)
@Assets/AyaLiveStream/AyaLiveStream.asmdef (assembly definition -- runtime code goes here)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ChatBotConfig ScriptableObject and ChatMessage data model</name>
  <files>Assets/AyaLiveStream/ChatBotConfig.cs, Assets/AyaLiveStream/ChatMessage.cs</files>
  <action>
**ChatBotConfig.cs** -- Create in `Assets/AyaLiveStream/`

Namespace: `AIEmbodiment.Samples`

Follow the PersonaConfig.cs ScriptableObject pattern:

```csharp
[CreateAssetMenu(fileName = "NewChatBotConfig", menuName = "AI Embodiment/Samples/Chat Bot Config")]
public class ChatBotConfig : ScriptableObject
```

Fields (all public, serialized, with Headers and attributes):

```
[Header("Identity")]
public string botName = "New Bot";
public Color chatColor = Color.white;

[Header("Personality")]
[TextArea(3, 8)]
public string personality;
public string[] speechTraits;  // e.g., "uses all caps", "lots of emojis", "short sentences"

[Header("Scripted Messages")]
[TextArea(1, 3)]
public string[] scriptedMessages;  // Pool of pre-authored lines this bot can say

[Header("Message Alternatives")]
[TextArea(1, 3)]
public string[] messageAlternatives;  // Alternative phrasings the bot swaps between

[Header("Behavior")]
[Range(0.5f, 5f)]
public float typingSpeed = 1.5f;  // Seconds per message (simulated typing delay)

[Range(0f, 1f)]
public float capsFrequency = 0.1f;  // How often messages are ALL CAPS

[Range(0f, 1f)]
public float emojiFrequency = 0.2f;  // How often messages include emoji
```

XML doc comment on the class explaining it defines a chat bot persona for the livestream sample.

Required usings: `UnityEngine` only.

**ChatMessage.cs** -- Create in `Assets/AyaLiveStream/`

Namespace: `AIEmbodiment.Samples`

Plain C# class (NOT MonoBehaviour, NOT ScriptableObject). This is a lightweight data container.

Fields (public, not serialized -- this is a runtime data object, not an asset):
```
public string BotName;
public Color BotColor;
public string Text;
public string Timestamp;
public bool IsFromUser;
public ChatBotConfig Source;  // Reference back to config for TrackedChatMessage in Phase 13
```

Add a convenience constructor:
```csharp
public ChatMessage(ChatBotConfig source, string text)
{
    BotName = source.botName;
    BotColor = source.chatColor;
    Text = text;
    Timestamp = DateTime.Now.ToString("HH:mm");
    IsFromUser = false;
    Source = source;
}
```

Add a static factory for user messages:
```csharp
public static ChatMessage FromUser(string text)
{
    return new ChatMessage
    {
        BotName = "You",
        BotColor = new Color(0.67f, 0.86f, 1f),  // Light blue matching msg-user
        Text = text,
        Timestamp = DateTime.Now.ToString("HH:mm"),
        IsFromUser = true,
        Source = null
    };
}
```

Required usings: `System`, `UnityEngine`.

Do NOT:
- Make ChatMessage a MonoBehaviour or ScriptableObject (it is a plain data class)
- Add Unity serialization attributes to ChatMessage (it is not persisted)
- Put these files in the Packages directory (they go in Assets/AyaLiveStream/)
  </action>
  <verify>
1. `Assets/AyaLiveStream/ChatBotConfig.cs` exists and compiles
2. `Assets/AyaLiveStream/ChatMessage.cs` exists and compiles
3. ChatBotConfig has `[CreateAssetMenu]` attribute
4. ChatBotConfig has all listed fields with correct types and attributes
5. ChatMessage has convenience constructor and `FromUser` factory
6. Both are in `AIEmbodiment.Samples` namespace
  </verify>
  <done>
ChatBotConfig.cs and ChatMessage.cs exist, compile, and provide the data types needed by the UI (Plan 03) and the chat bot system (Phase 13). ChatBotConfig is Inspector-editable with labeled sections. ChatMessage is a lightweight runtime data container.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create editor migration script and generate ChatBotConfig assets</name>
  <files>Assets/AyaLiveStream/Editor/MigrateChatBotConfigs.cs</files>
  <action>
Create directory `Assets/AyaLiveStream/Editor/` if it does not exist.

Create an assembly definition `Assets/AyaLiveStream/Editor/AyaLiveStream.Editor.asmdef` for the editor script:
```json
{
    "name": "com.google.ai-embodiment.samples.ayalivestream.editor",
    "rootNamespace": "AIEmbodiment.Samples.Editor",
    "references": [
        "com.google.ai-embodiment.samples.ayalivestream"
    ],
    "includePlatforms": ["Editor"],
    "excludePlatforms": [],
    "allowUnsafeCode": false,
    "overrideReferences": false,
    "precompiledReferences": [],
    "autoReferenced": true,
    "defineConstraints": [],
    "versionDefines": [],
    "noEngineReferences": false
}
```

Create `MigrateChatBotConfigs.cs` -- a one-time editor menu item that creates ChatBotConfig .asset files.

Namespace: `AIEmbodiment.Samples.Editor`

The nevatars source data does NOT exist as serialized assets in this repository (confirmed by research). Define character data inline. Create 6 distinct bot personas:

1. **Dad_John** -- Supportive dad energy
   - Color: `new Color(0.4f, 0.7f, 0.4f)` (warm green)
   - Personality: "Supportive dad who watches his daughter's art streams. Encouraging but not tech-savvy. Uses phrases like 'that's my girl' and 'wow kiddo'. Occasionally confused by chat terminology."
   - Speech traits: ["short encouraging phrases", "occasional dad jokes", "no emojis"]
   - Scripted messages: ["Wow that's looking great!", "Keep it up kiddo!", "Your mom would be so proud", "How long did that take you?", "That's my girl!", "I don't know how you do it", "Can you show the one with the dog again?"]
   - Typing speed: 2.0f
   - Caps frequency: 0.0f
   - Emoji frequency: 0.0f

2. **TeenFan_Miko** -- Excitable teenage fan
   - Color: `new Color(1f, 0.6f, 0.8f)` (pink)
   - Personality: "Excitable teenage fan who idolizes Aya. Types fast with lots of caps and emojis. Gets genuinely emotional about the art. Uses internet slang naturally."
   - Speech traits: ["frequent caps", "lots of emojis", "internet slang", "very short messages"]
   - Scripted messages: ["OMG HIIII", "ur art is SO good", "im literally crying rn", "YESSS", "wait thats so pretty", "can you draw me next lol", "i showed my friends and they all followed!!"]
   - Typing speed: 0.8f
   - Caps frequency: 0.4f
   - Emoji frequency: 0.7f

3. **ArtStudent_Priya** -- Thoughtful art student
   - Color: `new Color(0.6f, 0.8f, 1f)` (light blue)
   - Personality: "Second-year art student studying digital illustration. Asks technical questions about Aya's process. Respectful but curious. Uses proper grammar."
   - Speech traits: ["technical art vocabulary", "asks questions", "proper grammar", "medium length messages"]
   - Scripted messages: ["What brush are you using for that texture?", "The color palette reminds me of Monet's water lilies", "Do you sketch traditionally first or go straight digital?", "I love how you handle the light source", "How long have you been drawing?", "That layering technique is really interesting"]
   - Typing speed: 1.8f
   - Caps frequency: 0.0f
   - Emoji frequency: 0.1f

4. **Lurker_Ghost404** -- Quiet first-time viewer
   - Color: `new Color(0.6f, 0.6f, 0.7f)` (muted gray-blue)
   - Personality: "First-time viewer who rarely chats. When they do speak, it is brief and understated. Might be socially anxious. Uses lowercase everything."
   - Speech traits: ["all lowercase", "very short", "no punctuation", "rare messages"]
   - Scripted messages: ["hi", "nice", "wow", "cool", "first time here", "how do you do that"]
   - Typing speed: 3.0f
   - Caps frequency: 0.0f
   - Emoji frequency: 0.0f

5. **Regular_TechBro42** -- Long-time regular
   - Color: `new Color(1f, 0.8f, 0.3f)` (gold/yellow)
   - Personality: "Long-time viewer and self-proclaimed 'day one fan'. Works in tech, watches streams to relax. Knows Aya's lore and references old streams. Slightly gatekeep-y about being an OG fan."
   - Speech traits: ["references past streams", "tech metaphors", "medium messages", "some emojis"]
   - Scripted messages: ["Day one fan checking in!", "This reminds me of that piece you did last month", "Chat you don't even know, her old stuff was insane too", "Aya's improvement arc is literally exponential", "New viewers, trust me, sub now", "I remember when this stream had like 5 people"]
   - Typing speed: 1.2f
   - Caps frequency: 0.05f
   - Emoji frequency: 0.3f

6. **Troll_xXShadowXx** -- Mild troll / contrarian
   - Color: `new Color(0.9f, 0.3f, 0.3f)` (red)
   - Personality: "Not malicious but likes to stir things up. Asks provocative questions and plays devil's advocate. Occasionally compliments when genuinely impressed, which makes it meaningful."
   - Speech traits: ["provocative questions", "devil's advocate", "occasional genuine compliment", "medium messages"]
   - Scripted messages: ["is this AI generated lol", "I've seen better tbh", "ok that's actually kinda fire", "why does everyone like this", "how is this different from the last one", "wait no actually that's really good"]
   - Typing speed: 1.0f
   - Caps frequency: 0.1f
   - Emoji frequency: 0.15f

Implementation:
```csharp
[MenuItem("AI Embodiment/Samples/Migrate Chat Bot Configs")]
public static void Migrate()
```

For each character:
1. `ScriptableObject.CreateInstance<ChatBotConfig>()`
2. Set all fields from the hardcoded data above
3. Create directory `Assets/AyaLiveStream/ChatBotConfigs/` if it does not exist (`AssetDatabase.CreateFolder`)
4. `AssetDatabase.CreateAsset(config, $"Assets/AyaLiveStream/ChatBotConfigs/{fileName}.asset")`
5. `EditorUtility.SetDirty(config)` (CRITICAL -- research pitfall 6)
6. After all assets created: `AssetDatabase.SaveAssets()` and `AssetDatabase.Refresh()`
7. Log summary: `Debug.Log($"Created {count} ChatBotConfig assets in Assets/AyaLiveStream/ChatBotConfigs/")`

Asset file naming: `Dad_JohnConfig.asset`, `TeenFan_MikoConfig.asset`, `ArtStudent_PriyaConfig.asset`, `Lurker_Ghost404Config.asset`, `Regular_TechBro42Config.asset`, `Troll_xXShadowXxConfig.asset`

After creating the script, RUN the migration by opening Unity and using the menu item, OR document that it needs to be run. Since this is a Unity editor menu item, it cannot be run from CLI -- but the executor should note in the summary that the menu item exists and should be run.

Required usings: `UnityEngine`, `UnityEditor`, `AIEmbodiment.Samples`.

Do NOT:
- Try to load nevatars assets (they do not exist in this repo)
- Put the editor script in the runtime asmdef (it uses UnityEditor which is editor-only)
- Forget `EditorUtility.SetDirty()` (assets will not save otherwise)
- Forget `AssetDatabase.SaveAssets()` at the end
  </action>
  <verify>
1. `Assets/AyaLiveStream/Editor/` directory exists
2. `Assets/AyaLiveStream/Editor/AyaLiveStream.Editor.asmdef` exists with correct references and Editor-only platform
3. `Assets/AyaLiveStream/Editor/MigrateChatBotConfigs.cs` exists and compiles
4. Script has `[MenuItem]` attribute
5. Script creates 6 ChatBotConfig assets with distinct personalities
6. Script calls `EditorUtility.SetDirty()` and `AssetDatabase.SaveAssets()`
7. Each character has unique: name, color, personality, speech traits, scripted messages, behavior settings
  </verify>
  <done>
Editor migration script exists at Assets/AyaLiveStream/Editor/MigrateChatBotConfigs.cs. Running the menu item "AI Embodiment > Samples > Migrate Chat Bot Configs" creates 6 ChatBotConfig .asset files in Assets/AyaLiveStream/ChatBotConfigs/ with distinct personalities: Dad_John (supportive dad), TeenFan_Miko (excitable teen), ArtStudent_Priya (thoughtful student), Lurker_Ghost404 (quiet lurker), Regular_TechBro42 (OG regular), Troll_xXShadowXx (mild contrarian).
  </done>
</task>

</tasks>

<verification>
- ChatBotConfig.cs compiles with [CreateAssetMenu] attribute
- ChatMessage.cs compiles with convenience constructor and FromUser factory
- Editor asmdef references runtime asmdef and targets Editor platform only
- Migration script compiles and has [MenuItem] attribute
- Migration script defines 6 characters with unique personalities, colors, and scripted messages
- Migration script calls EditorUtility.SetDirty() and AssetDatabase.SaveAssets()
</verification>

<success_criteria>
ChatBotConfig ScriptableObject is defined and createable from Unity's asset menu. ChatMessage data model exists for runtime message passing. The migration script can create 6 fully-populated ChatBotConfig .asset files from hardcoded character data. All files compile without errors.
</success_criteria>

<output>
After completion, create `.planning/phases/12-foundation-and-data-model/12-02-SUMMARY.md`
</output>
