---
phase: 11-integration-verification
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - Packages/com.google.ai-embodiment/Runtime/AIEmbodimentSettings.cs.meta
  - Packages/com.google.ai-embodiment/Runtime/FunctionDeclaration.cs.meta
  - Packages/com.google.ai-embodiment/Runtime/GeminiEvent.cs.meta
  - Packages/com.google.ai-embodiment/Runtime/GeminiLiveClient.cs.meta
  - Packages/com.google.ai-embodiment/Runtime/GeminiLiveConfig.cs.meta
  - Packages/com.google.ai-embodiment/Runtime/ITTSProvider.cs.meta
  - Packages/com.google.ai-embodiment/Editor/AIEmbodimentSettingsEditor.cs.meta
  - Assets/Resources/AIEmbodimentSettings.asset
  - Assets/Resources/AIEmbodimentSettings.asset.meta
  - Assets/Resources.meta
  - Assets/Scenes/AyaSampleScene.unity
autonomous: true

must_haves:
  truths:
    - "Every .cs file in Runtime/ and Editor/ has a corresponding .meta file"
    - "AIEmbodimentSettings.Instance loads successfully from Resources"
    - "AudioPlayback._audioSource is wired to the AudioSource component in the scene"
    - "AudioSource.PlayOnAwake is disabled in the scene"
  artifacts:
    - path: "Packages/com.google.ai-embodiment/Runtime/AIEmbodimentSettings.cs.meta"
      provides: "Script GUID for AIEmbodimentSettings ScriptableObject"
      contains: "guid:"
    - path: "Assets/Resources/AIEmbodimentSettings.asset"
      provides: "ScriptableObject instance for API key storage"
      contains: "AIEmbodimentSettings"
    - path: "Assets/Scenes/AyaSampleScene.unity"
      provides: "Rebuilt scene with correct serialized references"
      contains: "_audioSource: {fileID: 406905700}"
  key_links:
    - from: "Assets/Resources/AIEmbodimentSettings.asset"
      to: "Packages/com.google.ai-embodiment/Runtime/AIEmbodimentSettings.cs"
      via: "m_Script guid matches .meta file"
      pattern: "guid:"
    - from: "Assets/Scenes/AyaSampleScene.unity (AudioPlayback)"
      to: "Assets/Scenes/AyaSampleScene.unity (AudioSource)"
      via: "_audioSource serialized reference"
      pattern: "_audioSource: \\{fileID: 406905700\\}"
---

<objective>
Fix all infrastructure prerequisites for the sample scene: create missing .meta files for 7 source files added during v0.8 phases, create the AIEmbodimentSettings ScriptableObject asset in a Resources folder, and fix the AyaSampleScene.unity YAML to correctly wire AudioPlayback._audioSource and disable PlayOnAwake.

Purpose: Without these fixes, the project will not compile cleanly in a fresh Unity import (missing .meta = Unity regenerates GUIDs breaking all references), PersonaSession.Connect() will fail immediately (no AIEmbodimentSettings asset), and AudioPlayback.Initialize() will NullRef (unlinked AudioSource).

Output: All .meta files created, AIEmbodimentSettings.asset in Resources, scene YAML with correct wiring.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-integration-verification/11-RESEARCH.md

Key files to examine:
@Packages/com.google.ai-embodiment/Runtime/PersonaSession.cs.meta (example .meta format -- 2-line GUID)
@Packages/com.google.ai-embodiment/Runtime/AudioCapture.cs.meta (another .meta example)
@Assets/AyaLiveStream/AyaPersonaConfig.asset (example ScriptableObject .asset format)
@Assets/Scenes/AyaSampleScene.unity (current scene YAML to fix)
@Packages/com.google.ai-embodiment/Runtime/AIEmbodimentSettings.cs (class to create asset for)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create missing .meta files for v0.8 source files</name>
  <files>
    Packages/com.google.ai-embodiment/Runtime/AIEmbodimentSettings.cs.meta
    Packages/com.google.ai-embodiment/Runtime/FunctionDeclaration.cs.meta
    Packages/com.google.ai-embodiment/Runtime/GeminiEvent.cs.meta
    Packages/com.google.ai-embodiment/Runtime/GeminiLiveClient.cs.meta
    Packages/com.google.ai-embodiment/Runtime/GeminiLiveConfig.cs.meta
    Packages/com.google.ai-embodiment/Runtime/ITTSProvider.cs.meta
    Packages/com.google.ai-embodiment/Editor/AIEmbodimentSettingsEditor.cs.meta
  </files>
  <action>
    Create Unity .meta files for all 7 .cs files that are missing them. These files were added during v0.8 phases (7-10) without corresponding .meta files.

    Each .meta file follows the standard 2-line format used by this project:
    ```
    fileFormatVersion: 2
    guid: <32-char-hex-guid>
    ```

    Reference existing .meta files in the same directories for the format (e.g., PersonaSession.cs.meta has `guid: c4b4a4d862418f73fbd3fabddbf985e5`).

    Generate unique 32-character hex GUIDs for each file. Use `python3 -c "import uuid; print(uuid.uuid4().hex)"` to generate each one, or generate all 7 at once.

    IMPORTANT: The GUID for AIEmbodimentSettings.cs.meta will be needed in Task 2 (for the .asset file's m_Script reference). Record it.

    Files to create:
    1. Runtime/AIEmbodimentSettings.cs.meta
    2. Runtime/FunctionDeclaration.cs.meta
    3. Runtime/GeminiEvent.cs.meta
    4. Runtime/GeminiLiveClient.cs.meta
    5. Runtime/GeminiLiveConfig.cs.meta
    6. Runtime/ITTSProvider.cs.meta
    7. Editor/AIEmbodimentSettingsEditor.cs.meta
  </action>
  <verify>
    Run: `find Packages/com.google.ai-embodiment/Runtime -name "*.cs" | while read f; do [ ! -f "${f}.meta" ] && echo "MISSING: $f"; done`
    Run: `find Packages/com.google.ai-embodiment/Editor -name "*.cs" | while read f; do [ ! -f "${f}.meta" ] && echo "MISSING: $f"; done`
    Both commands should produce no output (no missing .meta files).
  </verify>
  <done>All 7 .meta files exist with unique GUIDs. No .cs file in Runtime/ or Editor/ is missing its .meta.</done>
</task>

<task type="auto">
  <name>Task 2: Create AIEmbodimentSettings asset and fix scene YAML</name>
  <files>
    Assets/Resources/AIEmbodimentSettings.asset
    Assets/Resources/AIEmbodimentSettings.asset.meta
    Assets/Resources.meta
    Assets/Scenes/AyaSampleScene.unity
  </files>
  <action>
    **Part A: Create AIEmbodimentSettings.asset**

    1. Create `Assets/Resources/` directory if it does not exist. Create `Assets/Resources.meta` with a unique GUID (same 2-line format as folder .meta files: `fileFormatVersion: 2\nguid: <guid>\nfolderAsset: yes\n...` -- check existing folder .meta files like `Assets/AyaLiveStream/UI.meta` for the exact folder .meta format).

    2. Create `Assets/Resources/AIEmbodimentSettings.asset` as a Unity ScriptableObject YAML:
    ```yaml
    %YAML 1.1
    %TAG !u! tag:unity3d.com,2011:
    --- !u!114 &11400000
    MonoBehaviour:
      m_ObjectHideFlags: 0
      m_CorrespondingSourceObject: {fileID: 0}
      m_PrefabInstance: {fileID: 0}
      m_PrefabAsset: {fileID: 0}
      m_GameObject: {fileID: 0}
      m_Enabled: 1
      m_EditorHideFlags: 0
      m_Script: {fileID: 11500000, guid: <GUID-FROM-TASK-1>, type: 3}
      m_Name: AIEmbodimentSettings
      m_EditorClassIdentifier: com.google.ai-embodiment::AIEmbodiment.AIEmbodimentSettings
      _apiKey:
    ```
    Replace `<GUID-FROM-TASK-1>` with the actual GUID generated for AIEmbodimentSettings.cs.meta in Task 1.

    3. Create `Assets/Resources/AIEmbodimentSettings.asset.meta` with a unique GUID.

    **Part B: Fix AyaSampleScene.unity**

    Two targeted fixes in the existing scene YAML (preserve all other content exactly):

    Fix 1 -- AudioPlayback._audioSource wiring (line 306 of current file):
    Change: `_audioSource: {fileID: 0}`
    To:     `_audioSource: {fileID: 406905700}`
    (406905700 is the fileID of the AudioSource component on the same AyaSession GameObject)

    Fix 2 -- AudioSource PlayOnAwake (line 331 of current file):
    Change: `m_PlayOnAwake: 1`
    To:     `m_PlayOnAwake: 0`

    Do NOT change any other lines in the scene file. These are the only two fixes needed.
  </action>
  <verify>
    Run: `grep "_audioSource:" Assets/Scenes/AyaSampleScene.unity` -- should show `{fileID: 406905700}`
    Run: `grep "m_PlayOnAwake:" Assets/Scenes/AyaSampleScene.unity` -- should show `0`
    Run: `test -f Assets/Resources/AIEmbodimentSettings.asset && echo "EXISTS" || echo "MISSING"` -- should show EXISTS
    Run: `grep "m_Script:" Assets/Resources/AIEmbodimentSettings.asset` -- should contain the GUID from Task 1
  </verify>
  <done>
    AIEmbodimentSettings.asset exists at Assets/Resources/AIEmbodimentSettings.asset with correct script GUID reference.
    Scene YAML has AudioPlayback._audioSource wired to fileID 406905700.
    Scene YAML has AudioSource m_PlayOnAwake set to 0.
  </done>
</task>

</tasks>

<verification>
1. No .cs file in the package is missing a .meta file
2. `grep "_audioSource: {fileID: 406905700}" Assets/Scenes/AyaSampleScene.unity` returns a match
3. `grep "m_PlayOnAwake: 0" Assets/Scenes/AyaSampleScene.unity` returns a match
4. `Assets/Resources/AIEmbodimentSettings.asset` exists and references the correct script GUID
5. Scene YAML is otherwise unchanged (no accidental corruption)
</verification>

<success_criteria>
All infrastructure prerequisites for the sample scene are resolved:
- Every .cs file has a .meta file with a unique GUID
- AIEmbodimentSettings ScriptableObject asset is loadable from Resources
- AudioPlayback._audioSource points to the AudioSource on AyaSession
- AudioSource does not auto-play on scene load
</success_criteria>

<output>
After completion, create `.planning/phases/11-integration-verification/11-01-SUMMARY.md`
</output>
