---
phase: 14-narrative-director-user-interaction
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - Assets/AyaLiveStream/NarrativeBeatConfig.cs
  - Assets/AyaLiveStream/Data/Beat_WarmUp.asset
  - Assets/AyaLiveStream/Data/Beat_ArtProcess.asset
  - Assets/AyaLiveStream/Data/Beat_Characters.asset
autonomous: true

must_haves:
  truths:
    - "NarrativeBeatConfig ScriptableObject is creatable from Assets menu and editable in Inspector"
    - "3 beat assets exist with distinct time budgets, goals, director notes, and ordered scene lists"
    - "Scene types (AyaDialogue, ChatBurst, AyaChecksChat, AyaAction, UserChoice) and condition types (TimedOut, QuestionsAnswered, Always) are defined as enums"
    - "Data model is simplified from nevatars: no exit patterns, no alternate consequences, no repeat limits, no pre-recorded audio"
  artifacts:
    - path: "Assets/AyaLiveStream/NarrativeBeatConfig.cs"
      provides: "NarrativeBeatConfig ScriptableObject, NarrativeSceneConfig serializable class, SceneType enum, ConditionType enum"
      contains: "CreateAssetMenu"
    - path: "Assets/AyaLiveStream/Data/Beat_WarmUp.asset"
      provides: "Beat 1: warm-up (getting to know Aya)"
    - path: "Assets/AyaLiveStream/Data/Beat_ArtProcess.asset"
      provides: "Beat 2: art process discussion"
    - path: "Assets/AyaLiveStream/Data/Beat_Characters.asset"
      provides: "Beat 3: character discussion leading to movie reveal"
  key_links:
    - from: "NarrativeBeatConfig"
      to: "NarrativeSceneConfig[]"
      via: "scenes field"
      pattern: "public NarrativeSceneConfig\\[\\] scenes"
---

<objective>
Create the NarrativeBeat/Scene data model as ScriptableObjects and author 3 beat assets (warm-up, art process, characters) inspired by the nevatars beat system but simplified for the demo.

Purpose: All other plans in this phase depend on the NarrativeBeatConfig type. The beat assets define the narrative arc content that NarrativeDirector will execute.

Output: NarrativeBeatConfig.cs with embedded NarrativeSceneConfig, SceneType enum, ConditionType enum, plus 3 authored .asset files in Assets/AyaLiveStream/Data/.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-narrative-director-user-interaction/14-CONTEXT.md
@.planning/phases/14-narrative-director-user-interaction/14-RESEARCH.md
@Assets/AyaLiveStream/ChatBotConfig.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create NarrativeBeatConfig ScriptableObject and NarrativeSceneConfig data model</name>
  <files>Assets/AyaLiveStream/NarrativeBeatConfig.cs</files>
  <action>
Create NarrativeBeatConfig.cs in the AIEmbodiment.Samples namespace with two public types:

**NarrativeBeatConfig** (ScriptableObject, `[CreateAssetMenu(fileName = "Beat_", menuName = "AI Embodiment/Samples/Narrative Beat")]`):
- `string beatId` (default "BEAT_1")
- `string title` (default "Beat Title")
- `[Tooltip] float timeBudgetSeconds` (default 180f) -- "Time budget in seconds. Beat advances when goal is met or time expires."
- `[TextArea(2,4)] string goalDescription` -- what Aya should accomplish
- `[TextArea(3,6)] string directorNote` -- text sent to Gemini via SendText at beat start to steer Aya
- `NarrativeSceneConfig[] scenes` -- ordered scene list (Aya queue scenes; chat runs in parallel)
- `bool slowChatDuringAya` (default true) -- slow chat bursts during this beat
- `string[] skipKeywords` -- keywords that trigger skip to final beat if user says them

**NarrativeSceneConfig** (Serializable class, NOT ScriptableObject):
- `string sceneId` (default "SCENE_ID")
- `SceneType type` (default SceneType.AyaDialogue)
- `[TextArea(1,2)] string description` -- editor reference
- `[Header("AyaDialogue")] [TextArea(2,4)] string[] dialogueAlternatives` -- random selection for SendText
- `[Header("AyaChecksChat")] int maxResponsesToGenerate` (default 1)
- `[Header("AyaAction (Phase 15)")] string actionDescription` -- placeholder for Phase 15
- `[Header("Conditional Transition")] bool isConditional` (default false)
- `ConditionType conditionType` (default ConditionType.TimedOut)
- `float maxDuration` (default 60f)
- `int requiredValue` (default 1) -- for QuestionsAnswered condition

**SceneType enum**: AyaDialogue, ChatBurst, AyaChecksChat, AyaAction, UserChoice (5 values; drop nevatars Login type)

**ConditionType enum**: TimedOut, QuestionsAnswered, Always (3 values; drop nevatars TokenLimit, PatternMatched, HasRelevantQuestions, ViewerVoted, ViewerDidNotVote)

Use `[Header]`, `[Tooltip]`, and `[TextArea]` attributes throughout for Inspector friendliness. Follow the ChatBotConfig.cs pattern for attribute style and namespace.

Do NOT include: exit patterns, alternate consequences, ConsequenceType enum, repeat limits, pre-recorded audio, option pairs, poll options, animation triggers, mood states. These are nevatars over-engineering that the 3-beat demo does not need. Beats are linear (1->2->3) so no jump targets.
  </action>
  <verify>
File compiles: open Assets/AyaLiveStream/NarrativeBeatConfig.cs and verify it has no syntax errors, uses correct namespace (AIEmbodiment.Samples), and has the CreateAssetMenu attribute. Count: 1 SO class, 1 Serializable class, 2 enums.
  </verify>
  <done>NarrativeBeatConfig.cs exists with NarrativeBeatConfig (SO), NarrativeSceneConfig (Serializable), SceneType (5 values), ConditionType (3 values). All fields have Inspector-friendly attributes.</done>
</task>

<task type="auto">
  <name>Task 2: Author 3 beat ScriptableObject assets</name>
  <files>
Assets/AyaLiveStream/Data/Beat_WarmUp.asset
Assets/AyaLiveStream/Data/Beat_ArtProcess.asset
Assets/AyaLiveStream/Data/Beat_Characters.asset
  </files>
  <action>
Create 3 YAML .asset files for Unity ScriptableObjects. Each references the NarrativeBeatConfig MonoScript GUID (you will need to create a .meta file for NarrativeBeatConfig.cs first if one does not exist, or use a placeholder GUID and note it needs Unity reimport).

IMPORTANT: Since we cannot get the actual GUID until Unity imports the .cs file, create these as placeholder .asset files with the correct YAML structure that Unity will deserialize. Use `%YAML 1.1` header and `!u!114` MonoBehaviour tag. The m_Script reference GUID will need to be updated after Unity reimport -- add a comment in the asset or note this in the summary.

Alternative approach (PREFERRED): Instead of writing raw YAML .asset files which require exact GUIDs, create a simple Editor script `Assets/AyaLiveStream/Editor/CreateBeatAssets.cs` that the user runs once from a menu item (Assets > Create > AI Embodiment > Create Demo Beats). This script uses `ScriptableObject.CreateInstance<NarrativeBeatConfig>()` and `AssetDatabase.CreateAsset()` to generate the 3 beat assets with all fields populated.

The editor script should create:

**Beat 1: Warm-Up** (beatId: "BEAT_WARMUP", timeBudget: 180s = 3 min)
- Goal: "Aya has introduced herself and established a friendly rapport with the audience"
- Director note: "[Director: You're just starting your art livestream. Greet your audience warmly, introduce yourself as Aya, and chat casually about your day and what you're planning to work on today. Be friendly and approachable.]"
- Scenes (Aya queue):
  1. AyaDialogue (id: "WARMUP_GREET", description: "Aya greets viewers", dialogueAlternatives: ["[Director: Say hi to your viewers! You're excited to start streaming today. Welcome everyone and ask how they're doing.]", "[Director: Welcome your audience to the stream. You're in a great mood today and ready to create something special.]"])
  2. AyaChecksChat (id: "WARMUP_CHAT", description: "Aya responds to early chat", maxResponsesToGenerate: 2)
  3. AyaDialogue (id: "WARMUP_TRANSITION", description: "Aya transitions to art", dialogueAlternatives: ["[Director: Mention what you're going to work on today -- you've been sketching some character designs and you're really excited about them.]"], isConditional: true, conditionType: TimedOut, maxDuration: 60)
- skipKeywords: [] (no skip in warmup)
- slowChatDuringAya: true

**Beat 2: Art Process** (beatId: "BEAT_ART", timeBudget: 240s = 4 min)
- Goal: "Aya has discussed her creative process and tools, building anticipation for the characters"
- Director note: "[Director: You're now in your creative flow. Talk about your art process -- what tools and techniques you use, what inspires your style, share tips with viewers. You're working on character designs that are very close to your heart.]"
- Scenes:
  1. AyaDialogue (id: "ART_PROCESS", description: "Aya discusses her tools and process", dialogueAlternatives: ["[Director: Talk about your drawing tools, your creative process, and what makes your art style unique. You're working on something special today.]"])
  2. AyaChecksChat (id: "ART_CHAT", description: "Aya responds to chat about art", maxResponsesToGenerate: 2)
  3. AyaDialogue (id: "ART_TEASE", description: "Aya teases character designs", dialogueAlternatives: ["[Director: Mention the characters you've been designing. You're particularly attached to one character whose story really moved you. Tease that you might show something special later.]"], isConditional: true, conditionType: TimedOut, maxDuration: 90)
- skipKeywords: ["movie", "film", "clip", "show us", "reveal", "watch"]
- slowChatDuringAya: true

**Beat 3: Characters** (beatId: "BEAT_CHARACTERS", timeBudget: 180s = 3 min)
- Goal: "Aya has shared the story behind her characters, building emotional connection before the reveal"
- Director note: "[Director: Now share the deeper story behind your characters. One character in particular has a story that's very personal to you. Talk about what inspired the character, the emotions behind the design, and hint that there's something you've been working on -- a short film -- that brings this character to life. Build up to revealing it.]"
- Scenes:
  1. AyaDialogue (id: "CHAR_STORY", description: "Aya shares character backstory", dialogueAlternatives: ["[Director: Share the personal story behind your favorite character. What inspired you? What emotions did you put into the design? Your viewers can feel your passion.]"])
  2. AyaChecksChat (id: "CHAR_CHAT", description: "Aya responds to character questions", maxResponsesToGenerate: 3)
  3. AyaDialogue (id: "CHAR_REVEAL", description: "Aya builds to the reveal", dialogueAlternatives: ["[Director: You've been working on something special -- a short animated film featuring this character. You're incredibly proud of it. Build excitement and let your audience know you want to show them something amazing.]"], isConditional: true, conditionType: TimedOut, maxDuration: 60)
- skipKeywords: [] (already at final beat)
- slowChatDuringAya: true

Each beat's scenes should have the `Always` condition type except where `TimedOut` is specified. Set `isConditional = false` for AyaDialogue and AyaChecksChat scenes that should advance immediately (Always transitions are the default -- `isConditional = false` means "advance to next scene when done").

NOTE: Also create .meta files for the Data/ directory and each .asset if they don't exist.
  </action>
  <verify>
Editor script compiles and menu item "AI Embodiment/Create Demo Beat Assets" appears. Alternatively, if writing raw .asset files, verify YAML structure is valid.
  </verify>
  <done>3 beat assets are creatable via editor menu (or exist as .asset files). Each has distinct timeBudget, goalDescription, directorNote, and 3 ordered scenes with appropriate scene types and condition types.</done>
</task>

</tasks>

<verification>
1. NarrativeBeatConfig.cs compiles without errors in the AIEmbodiment.Samples namespace
2. SceneType enum has exactly 5 values: AyaDialogue, ChatBurst, AyaChecksChat, AyaAction, UserChoice
3. ConditionType enum has exactly 3 values: TimedOut, QuestionsAnswered, Always
4. NarrativeBeatConfig has CreateAssetMenu attribute and all required fields
5. Editor script (or .asset files) produces 3 beat assets with correct content
6. No nevatars over-engineering: no exit patterns, no ConsequenceType, no repeat limits, no pre-recorded audio
</verification>

<success_criteria>
- NarrativeBeatConfig type is available for NarrativeDirector (14-02) to reference
- 3 beat assets define the complete narrative arc content for the 10-minute demo
- Data model is Inspector-friendly with Header/Tooltip/TextArea attributes
- Simplified from nevatars (5 scene types, 3 condition types vs 6/8 in nevatars)
</success_criteria>

<output>
After completion, create `.planning/phases/14-narrative-director-user-interaction/14-01-SUMMARY.md`
</output>
